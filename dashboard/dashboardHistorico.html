<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Histórico</title>
    <link rel="stylesheet" href="../css/dashHistorico.css">
    <script src="../js/menu.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" href="../img/logo.png">
</head>

<body>
    <div class="container">
        <aside id="sidebar" class="sidebar-wrapper"></aside>

        <div class="conteudo_graficos">
            <div class="container_centralizado_botao">
                <button id="botao_historico" onclick="alterar_anual()">Histórico Anual</button>
                <button id="botao_historico" onclick="alterar_mensal()">Histórico Mensal</button>
                <button id="botao_historico" onclick="alterar_semanal()">Histórico Semanal</button>
            </div>
            <div class="container_centralizado" id="grafico_anual">
                <div class="historico_grafico">
                    <canvas id="myChart_anual"></canvas>
                </div>
            </div>

            <div class="container_centralizado" id="grafico_mensal">
                <div class="historico_grafico">
                    <canvas id="myChart_mensal"></canvas>
                </div>
            </div>

            <div class="container_centralizado" id="grafico_semanal">
                <div class="historico_grafico">
                    <canvas id="myChart_semanal"></canvas>
                </div>
            </div>
        </div>
    </div>

</body>

</html>

<script>
    const labels_historico_anual = [
        'Janeiro',
        'Fevereiro',
        'Março ',
        'Abril',
        'Maio',
        'Junho',
        'Julho',
        'Agosto',
        'Setembro',
        'Outubro',
        'Novembro',
        'Dezembro',
    ];

    const data_historico_anual = {
        labels: labels_historico_anual,
        datasets: [{
            label: 'Temperatura (°C)',
            backgroundColor: 'rgb(255, 215, 0)',
            borderColor: 'rgb(255, 215, 0)',
            data: [30, 29, 28, 25, 22, 23, 35, 33, 28, 27, 34, 30],
        }
        ]
    };

    const config_historico_anual = {
        type: 'bar',
        data: data_historico_anual,
        options: {
            plugins: {
                legend: {
                    labels: {
                        color: "white", // Define a cor da legenda como amarelo
                    },
                },
            },
            scales: {
                x: {
                    grid: {
                        color: "rgba(0, 0, 0, 0)", // Define a cor da grade X como transparente
                    },
                    ticks: {
                        color: "white", // Muda a cor das labels do eixo X para amarelo
                    },
                },
                y: {
                    beginAtZero: true,
                    ticks: {
                        color: "white", // Muda a cor das labels do eixo X para amarelo
                    },
                },
            },
        },
    };


    const myChart_anual = new Chart(
        document.getElementById('myChart_anual'),
        config_historico_anual
    );
</script>

<script>
    const labels_historico_mensal = [
        'Dia 1',
        'Dia 2',
        'Dia 3',
        'Dia 4',
        'Dia 5',
        'Dia 6',
        'Dia 7',
        'Dia 8',
        'Dia 9',
        'Dia 10',
        'Dia 11',
        'Dia 12',
        'Dia 13',
        'Dia 14',
        'Dia 15',
        'Dia 16',
        'Dia 17',
        'Dia 18',
        'Dia 19',
        'Dia 20',
        'Dia 21',
        'Dia 22',
        'Dia 23',
        'Dia 24',
        'Dia 25',
        'Dia 26',
        'Dia 27',
        'Dia 28',
        'Dia 29',
        'Dia 30',
        'Dia 31'
    ];

    const data_historico_mensal = {
        labels: labels_historico_mensal,
        datasets: [{
            label: 'Temperatura (°C)',
            backgroundColor: 'rgb(255, 215, 0)',
            borderColor: 'rgb(255, 215, 0)',
            data: [30, 29, 28, 25, 22, 23, 35, 33, 28, 27, 34, 30, 31, 29, 27, 30, 25, 24, 26, 28, 27, 29, 34, 33, 35, 30, 32, 32, 31, 33, 28]
        }
        ]
    };

    const config_historico_mensal = {
        type: 'bar',
        data: data_historico_mensal,
        options: {
            plugins: {
                legend: {
                    labels: {
                        color: "white", // Define a cor da legenda como amarelo
                    },
                },
            },
            scales: {
                x: {
                    grid: {
                        color: "rgba(0, 0, 0, 0)", // Define a cor da grade X como transparente
                    },
                    ticks: {
                        color: "white", // Muda a cor das labels do eixo X para amarelo
                    },
                },
                y: {
                    beginAtZero: true,
                    ticks: {
                        color: "white", // Muda a cor das labels do eixo X para amarelo
                    },
                },
            },
        },
    };

    const myChart_mensal = new Chart(
        document.getElementById('myChart_mensal'),
        config_historico_mensal
    );
</script>

<script>
    const labels_historico_semanal = [
        '17/10/2023',
        '18/10/2023',
        '19/10/2023 ',
        '20/10/2023',
        '21/10/2023',
        '22/10/2023',
    ];

    const data_historico_semanal = {
        labels: labels_historico_semanal,
        datasets: [{
            label: 'Temperatura (°C)',
            backgroundColor: 'rgb(255, 215, 0)',
            borderColor: 'rgb(255, 215, 0)',
            data: [30, 29, 28, 25, 22, 23, 35]
        }
        ]
    };

    const config_historico_semanal = {
        type: 'bar',
        data: data_historico_semanal,
        options: {
            plugins: {
                legend: {
                    labels: {
                        color: "white", // Define a cor da legenda como amarelo
                    },
                },
            },
            scales: {
                x: {
                    grid: {
                        color: "rgba(0, 0, 0, 0)", // Define a cor da grade X como transparente
                    },
                    ticks: {
                        color: "white", // Muda a cor das labels do eixo X para amarelo
                    },
                },
                y: {
                    beginAtZero: true,
                    ticks: {
                        color: "white", // Muda a cor das labels do eixo X para amarelo
                    },
                },
            },
        },
    };

    const myChart_semanal = new Chart(
        document.getElementById('myChart_semanal'),
        config_historico_semanal
    );

</script>

<script>
    const chartAnual = document.getElementById("grafico_anual")
    const chartMensal = document.getElementById("grafico_mensal")
    const chartSemanal = document.getElementById("grafico_semanal")

    chartAnual.style.display = "block";
    chartMensal.style.display = "none";
    chartSemanal.style.display = "none";

    function alterar_mensal() {
        chartAnual.style.display = "none";
        chartMensal.style.display = "block";
        chartSemanal.style.display = "none";
        console.log(chart.style.display);
    }

    function alterar_anual() {
        chartAnual.style.display = "block";
        chartMensal.style.display = "none";
        chartSemanal.style.display = "none";
        console.log(chartMensal.style.display);
    }

    function alterar_semanal() {
        chartAnual.style.display = "none";
        chartMensal.style.display = "none";
        chartSemanal.style.display = "block";
        console.log(chartMensal.style.display);
    }
</script>

<script>
    const menu = [
        {
            parent: 'aliments',
            label: 'Setor 1',
            icon: '✔',
            click: goToChild,
            child: [
                { parent: 'aliments', label: 'Voltar', icon: '◀', click: backToParent },
                { parent: 'aliments', label: 'Máquina 1', icon: '✔', click: dashBoa },
                { parent: 'aliments', label: 'Máquina 2', icon: '✔', click: dashBoa },
                { parent: 'aliments', label: 'Máquina 3', icon: '✔', click: dashBoa },
                { parent: 'aliments', label: 'Máquina 4', icon: '✔', click: dashBoa }
            ],
            rightIcon: '▶',
        },
        {
            parent: 'teste',
            label: 'Setor 2',
            icon: '✖',
            click: goToChild,
            child: [
                { parent: 'teste', label: 'Voltar', icon: '◀', click: backToParent },
                { parent: 'teste', label: 'Máquina 1', icon: '✖', click: dashRuim },
                { parent: 'teste', label: 'Máquina 2', icon: '✔', click: dashBoa },
                { parent: 'teste', label: 'Máquina 3', icon: '✖', click: dashRuim },
                { parent: 'teste', label: 'Máquina 4', icon: '✔', click: dashBoa }
            ],
            rightIcon: '▶',
        },
        {
            parent: 'colors',
            label: 'Setor 3',
            icon: '✔',
            click: goToChild,
            child: [
                { parent: 'colors', label: 'Voltar', icon: '◀', click: backToParent },
                { parent: 'colors', label: 'Máquina 1', icon: '✔', click: dashBoa },
                { parent: 'colors', label: 'Máquina 2', icon: '✔', click: dashBoa },
                { parent: 'colors', label: 'Máquina 3', icon: '✔', click: dashBoa }
            ],
            rightIcon: '▶',
        },
        {
            parent: 'aliments',
            label: 'Histórico',
            icon: '◯',
            click: voltarHistorico,
            child: [
                { parent: 'aliments', label: 'Voltar', icon: '◀', click: backToParent },
                { parent: 'aliments', label: 'Máquina 1', icon: '✔' },
                { parent: 'aliments', label: 'Máquina 2', icon: '✔' },
                { parent: 'aliments', label: 'Máquina 3', icon: '✔' },
                { parent: 'aliments', label: 'Máquina 4', icon: '✔' }
            ],
            rightIcon: '▶',
        },
        {
            parent: 'aliments',
            label: 'Home',
            icon: '◯',
            click: voltarHome,
            child: [
                { parent: 'aliments', label: 'Voltar', icon: '◀', click: backToParent },
                { parent: 'aliments', label: 'Máquina 1', icon: '✔' },
                { parent: 'aliments', label: 'Máquina 2', icon: '✔' },
                { parent: 'aliments', label: 'Máquina 3', icon: '✔' },
                { parent: 'aliments', label: 'Máquina 4', icon: '✔' }
            ],
            rightIcon: '▶',
        }
    ]

    function backToParent(event) {

        const { id } = event.currentTarget.dataset

        let moveIn = document.getElementById("menu");
        moveIn.className = 'menu menu-primary-enter menu-primary-enter-active'

        let moveOut = document.getElementById(id);
        moveOut.className = 'menu menu-secondary-exit menu-secondary-exit-active'

    }

    function goToChild(event) {

        const { id } = event.currentTarget.dataset

        let moveIn = document.getElementById(id);
        moveIn.className = 'menu menu-secondary-enter menu-secondary-enter-active'


        let moveOut = document.getElementById("menu");
        moveOut.className = 'menu menu-primary-exit menu-primary-exit-active'

    }

    function voltarHistorico(event) {
        window.location.href = "dashboardHistorico.html"
    }

    function dashBoa(event) {
        window.location.href = "dashboardComponentes.html"
    }

    function dashRuim(event) {
        window.location.href = "dashboardRuim.html"
    }

    function voltarHome(event) {
        window.location.href = "../index.html"
    }

    const createMenuItem = (item) => {
        let li = document.createElement("li");
        li.className = 'menu-item'
        console.log(item.icon);
        if (item.icon == "✖") {
            li.innerHTML = `    
            <div class="icon" style="background-color: red">${item.icon}</div>
            <span class="label">${item.label}</span>
            <div>${item.rightIcon || ''}</div>
        `
        } else if (item.icon == "◀" || item.icon == "◯") {
            li.innerHTML = `    
            <div class="icon" style="background-color: #79690d">${item.icon}</div>
            <span class="label">${item.label}</span>
            <div>${item.rightIcon || ''}</div>
        `
        } else {
            li.innerHTML = `    
            <div class="icon">${item.icon}</div>
            <span class="label">${item.label}</span>
            <div>${item.rightIcon || ''}</div>
        `
        }

        li.dataset.id = item.parent
        li.onclick = item.click

        return li
    }

    const createChildMenu = (items) => {
        const sidebar = document.getElementById("sidebar")
        const menu = document.createElement("ul");
        menu.className = 'menu menu-secondary-exit menu-secondary-exit-active'
        menu.id = items[0].parent
        items.map(el => {
            let li = createMenuItem(el)
            menu.appendChild(li)
        })
        sidebar.appendChild(menu)
    }

    const buildMenu = () => {

        const sidebar = document.getElementById("sidebar")
        const mainMenu = document.createElement("ul");
        mainMenu.className = 'menu'
        mainMenu.id = 'menu'
        menu.map(el => {
            let li = createMenuItem(el)
            mainMenu.appendChild(li)
            createChildMenu(el.child)
        })
        sidebar.appendChild(mainMenu)
    }

    buildMenu()
</script>