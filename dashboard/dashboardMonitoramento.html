<!DOCTYPE html>
<html lang="en" dir="ltr">

<head>
    <meta charset="UTF-8">
    <title> Setor 1 M치quina 1 </title>
    <script src="../js/menu.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="../css/dash.css">
    <!-- Boxiocns CDN Link -->
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="../img/logo.png">
</head>

<body>
    <div class="sidebar close">
        <div class="logo-details">
            <i class='bx bx-code-alt'></i>
            <span class="logo_name">Crypto Scan</span>
        </div>
        <ul class="nav-links">
            <li>
                <a href="dashboard-cryptoScan.html">
                    <i class='bx bx-grid-alt'></i>
                    <span class="link_name">Painel</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a class="link_name" href="dashboard-cryptoScan.html">Painel</a></li>
                </ul>
            </li>
            <li>
                <div class="iocn-link">
                    <a href="#">
                        <i class='bx bxs-business'></i>
                        <span class="link_name">Setor 1</span>
                    </a>
                    <i class='bx bxs-chevron-down arrow'></i>
                </div>
                <ul class="sub-menu">
                    <li><a class="link_name" href="#">Setor 1</a></li>
                    <li><a href="./dashboardMonitoramento.html">M치quina 1</a></li>
                    <li><a href="#">M치quina 2</a></li>
                </ul>
            </li>
             <li>
                <div class="iocn-link">
                    <a href="#">
                        <i class='bx bxs-business'></i>
                        <span class="link_name">Setor 2</span>
                    </a>
                    <i class='bx bxs-chevron-down arrow'></i>
                </div>
                <ul class="sub-menu">
                    <li><a class="link_name" href="#">Setor 2</a></li>
                    <li><a href="#">M치quina 1</a></li>
                    <li><a href="#">M치quina 2</a></li>
                    <li><a href="#">M치quina 3</a></li>
                    <li><a href="#">M치quina 4</a></li>
                </ul>
            </li>
            <li>
                <a href="/funcionarioCRUD.html">
                    <i class='bx bx-user'></i>
                    <span class="link_name">Cadastrar Funcion치rios</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a class="link_name" href="/funcionarioCRUD.html">Cadastrar Funcion치rios</a></li>
                </ul>
            </li>
            <li>
                <a href="../setorCRUD.html">
                    <i class='bx bx-user'></i>
                    <span class="link_name">Cadastrar Setor</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a class="link_name" href="../setorCRUD.html">Cadastrar Setor</a></li>
                </ul>
            </li>
            <li>
                <a href="../computadorCrud.html">
                    <i class='bx bx-user'></i>
                    <span class="link_name">Cadastrar Computador</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a class="link_name" href="../computadorCrud.html">Cadastrar Computador</a></li>
                </ul>
            </li>
            <li>
                <a href="#">
                    <i class='bx bx-cog'></i>
                    <span class="link_name">Setting</span>
                </a>
                <ul class="sub-menu blank">
                    <li><a class="link_name" href="#">Setting</a></li>
                </ul>
            </li>
            <li>
                <div class="profile-details">
                    <div class="profile-content">
                    </div>
                    <div class="name-job">
                        <div class="profile_name" id="profile_name"></div>
                    </div>
                    <i class='bx bx-log-out'></i>
                </div>
            </li>
        </ul>
    </div>
    <section class="home-section">
        <div class="home-content">
            <i class='bx bx-menu'></i>
            <div class="fora-da-sidebar">

                <div class="container-avisos">
                    <div class="container-avisos">
                        <div class="setor">Voc칡 est치 em: <br> Setor 1 <br> M치quina 1</div>

                        <span id="spanRam"><b>Uso da RAM</b></span>
                        <div id="tooltipRAM" class="status-geral" onmouseover="ativarHover()"
                            onmouseleave="desativarHover()"> <br> <b class="uso-componente" id="usoRam">0</b> <br>
                            <br>
                            <span class="tooltiptext"><b>M칠tricas:</b> <br>
                                游릭: Uso abaixo de 90%. <br>
                                游댮: Uso maior ou igual a 90%.</span>
                        </div>

                        <span id="spanGPU"><b>Uso da GPU</b></span>
                        <div id="tooltipGPU" class="status-geral" onmouseover="ativarHoverGPU()"
                            onmouseleave="desativarHoverGPU()"> <br> <b class="uso-componente" id="usoGpu">0</b> <br>
                            <br>
                            <span class="tooltiptext"><b>M칠tricas:</b> <br>
                                游릭: Temperatura abaixo de 90춿C. <br>
                                游댮: Temperatura maior ou igual a 90춿C.</span>
                        </div>

                        <span id="spanCPU"><b>Uso da CPU</b></span>
                        <div id="tooltipCPU" class="status-geral" onmouseover="ativarHoverCPU()"
                            onmouseleave="desativarHoverCPU()"> <br> <b class="uso-componente" id="usoCpu">0</b> <br>
                            <br>
                            <span class="tooltiptext">Contagem de Processos ativos atualmente.</span>
                        </div>

                        <span id="spanDisco"><b>Uso do Disco</b></span>
                        <div id="tooltipDisco" class="status-geral" onmouseover="ativarHoverDisco()"
                            onmouseleave="desativarHoverDisco()"> <br> <b class="uso-componente" id="usoDisco">0</b> <br>
                            <br>
                            <span class="tooltiptext"><b>M칠tricas:</b> <br>
                                游릭: Uso abaixo de 90%. <br>
                                游댮: Uso maior ou igual a 90%.</span>
                        </div>

                    </div>
                </div>

                <div class="graficos">
                    <div class="graficos_da_esquerda">
                        <div class="grafico">
                            <span>Uso da RAM nas 칔ltimas 10 Horas</span>
                            <div>
                                <canvas id="myChart2"></canvas>
                            </div>
                        </div>
                        <div class="grafico">
                            <span>Uso da CPU nas 칔ltimas 10 Horas</span>
                            <canvas id="myChart3"></canvas>
                        </div>
                    </div>
                    <div class="graficos_da_direita">
                        <div class="grafico">
                            <span>Uso da GPU nas 칔ltimas 10 Horas</span>
                            <canvas id="myChart4"></canvas>
                        </div>
                        <div class="grafico">
                            <span>Uso do Disco nas 칔ltimas 10 Horas</span>
                            <canvas id="myChart6"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

</body>

</html>

<script>

    var limiteRAM = 70
    var limiteGPU = 60
    var limiteDisco = 70


    function ativarHover() {
        var spanRam = document.getElementById('spanRam')
        spanRam.classList.add('hovered')
    }

    function desativarHover() {
        var spanRam = document.getElementById('spanRam')
        spanRam.classList.remove('hovered')
    }

    function ativarHoverGPU() {
        var spanGPU = document.getElementById('spanGPU')
        spanGPU.classList.add('hovered')
    }

    function desativarHoverGPU() {
        var spanGPU = document.getElementById('spanGPU')
        spanGPU.classList.remove('hovered')
    }

    function ativarHoverCPU() {
        var spanCPU = document.getElementById('spanCPU')
        spanCPU.classList.add('hovered')
    }

    function desativarHoverCPU() {
        var spanCPU = document.getElementById('spanCPU')
        spanCPU.classList.remove('hovered')
    }

    function ativarHoverDisco() {
        var spanDisco = document.getElementById('spanDisco')
        spanDisco.classList.add('hovered')
    }

    function desativarHoverDisco() {
        var spanDisco = document.getElementById('spanDisco')
        spanDisco.classList.remove('hovered')
    }

</script>

<script src="../node_modules/axios/dist/axios.min.js"></script>
<script>
    let arrow = document.querySelectorAll(".arrow")
    for (var i = 0; i < arrow.length; i++) {
        arrow[i].addEventListener("click", (e) => {
            let arrowParent = e.target.parentElement.parentElement//selecting main parent of arrow
            arrowParent.classList.toggle("showMenu")
        })
    }
    let sidebar = document.querySelector(".sidebar")
    let sidebarBtn = document.querySelector(".bx-menu")
    console.log(sidebarBtn)
    sidebarBtn.addEventListener("click", () => {
        sidebar.classList.toggle("close")
    })

    profile_name.innerHTML = sessionStorage.NOME_FUNCIONARIO
</script>

<script>
    const options = {
        plugins: {
            legend: {
                display: true,
                labels: {
                    color: 'white'
                }
            }
        },
        scales: {
            x: {
                ticks: {
                    color: 'white'
                }
            },
            y: {
                ticks: {
                    color: 'white'
                }
            }
        }
    };
</script>
<script>
    const getRamData = async () => {
        try {
            const response = await axios.get('http://34.232.200.187:3000/dadosRam', [])
            const ramData = response?.data.map((dadoRam) => dadoRam.medida)

            myChart2.data.datasets[0].data = ramData
            myChart2.update()
            if (response.data[0].medida >= 90) {
                var divIndicadorRAM = document.getElementById('tooltipRAM')
                // Pinta de vermelho
                divIndicadorRAM.style.backgroundColor = 'rgb(171, 12, 12)'
            } else if (response.data[0].medida < 90) {
                var divIndicadorRAM = document.getElementById('tooltipRAM')
                // Pinta de verde
                divIndicadorRAM.style.backgroundColor = 'rgb(91, 152, 0)'
            }
            var usoRam = document.getElementById('usoRam')
            usoRam.innerHTML = `${response.data[0].medida}%`
            console.log(response)
            console.log(ramData)
        } catch (error) {
            console.error(error)
        }
    }

    setInterval(getRamData, 3000)

    const dadoRam = getRamData()
    const labels_ram = [
        '08:00',
        '09:00',
        '10:00',
        '11:00',
        '12:00',
        '13:00',
        '14:00',
        '15:00',
        '16:00',
        '17:00',
        '18:00',
    ]

    const data_ram = {
        labels: labels_ram,
        datasets: [{
            label: 'Uso da RAM (%)',
            backgroundColor: '#ffd700',
            borderColor: '#ffd700',
            data: [],
        },
        {
            label: 'Uso m치ximo da RAM (%)',
            backgroundColor: 'rgb(255, 0, 0)',
            borderColor: 'rgb(255, 0, 0)',
            data: [90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90],
            pointRadius: 0
        }
        ]
    }

    const config_ram = {
        type: 'line',
        data: data_ram,
        options: options
    }

    const myChart2 = new Chart(
        document.getElementById('myChart2'),
        config_ram
    );


</script>


<!-- 3 grafico (CPU) -->


<script>
    const getCpuData = async () => {
        try {
            const response = await axios.get('http://34.232.200.187:3000/dadosProcessador', [])
            const cpuData = response?.data.map((dadoCpu) => dadoCpu.medida)

            myChart3.data.datasets[0].data = cpuData
            myChart3.update()
            var usoCpu = document.getElementById('usoCpu')
            usoCpu.innerHTML = `${parseInt(response.data[0].medida)}%`
            console.log(response)
            console.log(cpuData)
        } catch (error) {
            console.error(error)
        }
    }

    setInterval(getCpuData, 3000)

    const dadoCpu = getCpuData()
    const labels_cpu = [
        '08:00',
        '09:00',
        '10:00',
        '11:00',
        '12:00',
        '13:00',
        '14:00',
        '15:00',
        '16:00',
        '17:00',
        '18:00',
    ]

    const data_cpu = {
        labels: labels_cpu,
        datasets: [{
            label: 'Uso da CPU (%)',
            backgroundColor: '#ffd700',
            borderColor: '#ffd700',
            data: [], // Inicialmente vazio
        },
        {
            label: 'Uso m치ximo da CPU (%)',
            backgroundColor: 'rgb(255, 0, 0)',
            borderColor: 'rgb(255, 0, 0)',
            data: [90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90],
            pointRadius: 0
        }
        ]
    }

    const config_cpu = {
        type: 'line',
        data: data_cpu,
        options: options
    }

    const myChart3 = new Chart(
        document.getElementById('myChart3'),
        config_cpu
    );
</script>


<!-- graficos 4 (PLACA DE VIDEO) -->


<script>
    const getGpuData = async () => {
        try {
            const response = await axios.get('http://34.232.200.187:3000/dadosGpu', [])
            const gpuData = response?.data.map((dadoGpu) => dadoGpu.medida)

            myChart4.data.datasets[0].data = gpuData
            myChart4.update()
            if (response.data[0].medida >= 85) {
                var divIndicadorGPU = document.getElementById('tooltipGPU')
                // Pinta de vermelho
                divIndicadorGPU.style.backgroundColor = 'rgb(171, 12, 12)'
            } else if (response.data[0].medida < 85) {
                var divIndicadorGPU = document.getElementById('tooltipGPU')
                // Pinta de verde
                divIndicadorGPU.style.backgroundColor = 'rgb(91, 152, 0)'
            }
            var usoGpu = document.getElementById('usoGpu')
            usoGpu.innerHTML = `${parseInt(response.data[0].medida)}춿C`
            console.log(response)
            console.log(gpuData)
        } catch (error) {
            console.error(error)
        }
    }

    setInterval(getGpuData, 3000)

    const dadoGpu = getGpuData()
    const labels_placaDeVideo = [
        '08:00',
        '09:00',
        '10:00',
        '11:00',
        '12:00',
        '13:00',
        '14:00',
        '15:00',
        '16:00',
        '17:00',
        '18:00',
    ]

    const data_placaDeVideo = {
        labels: labels_placaDeVideo,
        datasets: [{
            label: 'Temp Placa de V칤deo (춿C)',
            backgroundColor: '#ffd700',
            borderColor: '#ffd700',
            data: [],
        },
        {
            label: 'Temperatura M치x (춿C)',
            backgroundColor: 'rgb(255, 0, 0)',
            borderColor: 'rgb(255, 0, 0)',
            data: [90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90,],
            pointRadius: 0
        }
        ]
    }

    const config_placaDeVideo = {
        type: 'line',
        data: data_placaDeVideo,
        options: options
    }

    const myChart4 = new Chart(
        document.getElementById('myChart4'),
        config_placaDeVideo
    );
</script>

<script>
    const getDiscoData = async () => {
        try {
            const response = await axios.get('http://34.232.200.187:3000/dadosDisco', [])
            const discoData = response?.data.map((dadoDisco) => dadoDisco.medida)

            myChart6.data.datasets[0].data = discoData
            myChart6.update()
            if (response.data[0].medida >= 90) {
                var divIndicadorDisco = document.getElementById('tooltipDisco')
                // Pinta de vermelho
                divIndicadorDisco.style.backgroundColor = 'rgb(171, 12, 12)'
            } else if (response.data[0].medida < 90) {
                var divIndicadorDisco = document.getElementById('tooltipDisco')
                // Pinta de verde
                divIndicadorDisco.style.backgroundColor = 'rgb(91, 152, 0)'
            }
            var usoDisco = document.getElementById('usoDisco')
            usoDisco.innerHTML = `${parseInt(response.data[0].medida)}%`
            console.log(response)
            console.log(discoData)
        } catch (error) {
            console.error(error)
        }
    }

    setInterval(getDiscoData, 3000)
    const dadoDisco = getDiscoData()
    const labels_disco = [
        '08:00',
        '09:00',
        '10:00',
        '11:00',
        '12:00',
        '13:00',
        '14:00',
        '15:00',
        '16:00',
        '17:00',
        '18:00',
    ]

    const data_disco = {
        labels: labels_disco,
        datasets: [{
            label: 'Uso do Disco (%)',
            backgroundColor: '#ffd700',
            borderColor: '#ffd700',
            data: []
        },
        {
            label: 'Uso m치ximo do Disco (%)',
            backgroundColor: 'rgb(255, 0, 0)',
            borderColor: 'rgb(255, 0, 0)',
            data: [90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90],
            pointRadius: 0
        }
        ]
    }

    const config_disco = {
        type: 'line',
        data: data_disco,
        options: options
    }

    const myChart6 = new Chart(
        document.getElementById('myChart6'),
        config_disco
    );
</script>
