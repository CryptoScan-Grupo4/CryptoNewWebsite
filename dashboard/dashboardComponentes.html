<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard</title>
    <link rel="stylesheet" href="../css/dash.css">
    <script src="../js/menu.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="icon" type="image/png" href="../img/logo.png">
</head>

<body>
    <div class="div-global">
        <aside id="sidebar" class="sidebar-wrapper">
            <!-- <div class="container_centralizado">Setor 1, Máquina 2</div> -->
        </aside>
        <div class="container">

            <div class="indices">
                <div class="indice_bom">
                    <h1>GPU</h1>
                    <span><b>Status: </b>Boa</span>

                </div>
                <div class="indice_bom">
                    <h1>RAM</h1>
                    <span><b>Status: </b>Boa</span>
                </div>
                <div class="indice_bom">
                    <h1>CPU</h1>
                    <span><b>Status: </b>Boa</span>
                </div>
            </div>

            <div class="graficos">
                <div class="graficos_de_cima">
                    <div class="grafico">
                        <canvas id="myChart2"></canvas>
                    </div>
                    <div class="grafico">
                        <canvas id="myChart3"></canvas>
                    </div>
                </div>
                <div class="graficos_de_baixo">
                    <div class="grafico">
                        <canvas id="myChart4"></canvas>
                    </div>
                    <div class="grafico">
                        <canvas id="myChart6"></canvas>
                    </div>
                </div>
            </div>
        </div>

    </div>

</body>

</html>

<script>
    const options = {
        plugins: {
            legend: {
                display: true,
                labels: {
                    color: 'white'
                }
            }
        },
        scales: {
            x: {
                ticks: {
                    color: 'white'
                }
            },
            y: {
                ticks: {
                    color: 'white'
                }
            }
        }
    };
</script>

<!-- 2 grafico (RAM) -->


<script>
    const labels_ram = [
        '08:00',
        '09:00',
        '10:00',
        '11:00',
        '12:00',
        '13:00',
        '14:00',
        '15:00',
        '16:00',
        '17:00',
        '18:00',
    ];

    const data_ram = {
        labels: labels_ram,
        datasets: [{
            label: 'Uso da RAM (%)',
            backgroundColor: '#ffd700',
            borderColor: '#ffd700',
            data: [87, 88, 86, 87, 86, 88, 90, 92, 91, 89, 89],
        },
        {
            label: 'Uso máximo da RAM (%)',
            backgroundColor: 'rgb(255, 0, 0)',
            borderColor: 'rgb(255, 0, 0)',
            data: [90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90],
            pointRadius: 0
        }
        ]
    };

    const config_ram = {
        type: 'line',
        data: data_ram,
        options: options
    };

    const myChart2 = new Chart(
        document.getElementById('myChart2'),
        config_ram
    );
</script>


<!-- 3 grafico (CPU) -->



<script>
    const labels_cpu = [
        '08:00',
        '09:00',
        '10:00',
        '11:00',
        '12:00',
        '13:00',
        '14:00',
        '15:00',
        '16:00',
        '17:00',
        '18:00',
    ];

    const data_cpu = {
        labels: labels_cpu,
        datasets: [{
            label: 'Uso da CPU (%)',
            backgroundColor: '#ffd700',
            borderColor: '#ffd700',
            data: [90, 91, 89, 89, 90, 92, 90, 88, 89, 88, 89],
        },
        {
            label: 'Uso máximo da CPU (%)',
            backgroundColor: 'rgb(255, 0, 0)',
            borderColor: 'rgb(255, 0, 0)',
            data: [90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90],
            pointRadius: 0
        }
        ]
    };

    const config_cpu = {
        type: 'line',
        data: data_cpu,
        options: options
    };

    const myChart3 = new Chart(
        document.getElementById('myChart3'),
        config_cpu
    );

</script>


<!-- graficos 4 (PLACA DE VIDEO) -->


<script>
    const labels_placaDeVideo = [
        '08:00',
        '09:00',
        '10:00',
        '11:00',
        '12:00',
        '13:00',
        '14:00',
        '15:00',
        '16:00',
        '17:00',
        '18:00',
    ];

    const data_placaDeVideo = {
        labels: labels_placaDeVideo,
        datasets: [{
            label: 'Temp Placa de Vídeo (°C)',
            backgroundColor: '#ffd700',
            borderColor: '#ffd700',
            data: [82, 80, 81, 80, 90, 78, 78, 79, 80, 83, 81],
        },
        {
            label: 'Temperatura Máx (°C)',
            backgroundColor: 'rgb(255, 0, 0)',
            borderColor: 'rgb(255, 0, 0)',
            data: [85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85, 85,],
            pointRadius: 0
        }
        ]
    };

    const config_placaDeVideo = {
        type: 'line',
        data: data_placaDeVideo,
        options: options
    };

    const myChart4 = new Chart(
        document.getElementById('myChart4'),
        config_placaDeVideo
    );
</script>

<script>
    const labels_disco = [
        '08:00',
        '09:00',
        '10:00',
        '11:00',
        '12:00',
        '13:00',
        '14:00',
        '15:00',
        '16:00',
        '17:00',
        '18:00',
    ];

    const data_disco = {
        labels: labels_disco,
        datasets: [{
            label: 'Uso do Disco (%)',
            backgroundColor: '#ffd700',
            borderColor: '#ffd700',
            data: [87, 89, 88, 90, 89, 89, 91, 90, 88, 87, 89],
        },
        {
            label: 'Uso máximo do Disco (%)',
            backgroundColor: 'rgb(255, 0, 0)',
            borderColor: 'rgb(255, 0, 0)',
            data: [90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90, 90],
            pointRadius: 0
        }
        ]
    };

    const config_disco = {
        type: 'line',
        data: data_disco,
        options: options
    };

    const myChart6 = new Chart(
        document.getElementById('myChart6'),
        config_disco
    );
</script>

<script>
    const menu = [
        {
            parent: 'aliments',
            label: 'Setor 1',
            icon: '✔',
            click: goToChild,
            child: [
                { parent: 'aliments', label: 'Voltar', icon: '◀', click: backToParent },
                { parent: 'aliments', label: 'Máquina 1', icon: '✔', click: dashBoa },
                { parent: 'aliments', label: 'Máquina 2', icon: '✔', click: dashBoa },
                { parent: 'aliments', label: 'Máquina 3', icon: '✔', click: dashBoa },
                { parent: 'aliments', label: 'Máquina 4', icon: '✔', click: dashBoa }
            ],
            rightIcon: '▶',
        },
        {
            parent: 'teste',
            label: 'Setor 2',
            icon: '✖',
            click: goToChild,
            child: [
                { parent: 'teste', label: 'Voltar', icon: '◀', click: backToParent },
                { parent: 'teste', label: 'Máquina 1', icon: '✖', click: dashRuim },
                { parent: 'teste', label: 'Máquina 2', icon: '✔', click: dashBoa },
                { parent: 'teste', label: 'Máquina 3', icon: '✖', click: dashRuim },
                { parent: 'teste', label: 'Máquina 4', icon: '✔', click: dashBoa }
            ],
            rightIcon: '▶',
        },
        {
            parent: 'colors',
            label: 'Setor 3',
            icon: '✔',
            click: goToChild,
            child: [
                { parent: 'colors', label: 'Voltar', icon: '◀', click: backToParent },
                { parent: 'colors', label: 'Máquina 1', icon: '✔', click: dashBoa },
                { parent: 'colors', label: 'Máquina 2', icon: '✔', click: dashBoa },
                { parent: 'colors', label: 'Máquina 3', icon: '✔', click: dashBoa }
            ],
            rightIcon: '▶',
        },
        {
            parent: 'aliments',
            label: 'Histórico',
            icon: '◯',
            click: voltarHistorico,
            child: [
                { parent: 'aliments', label: 'Voltar', icon: '◀', click: backToParent },
                { parent: 'aliments', label: 'Máquina 1', icon: '✔' },
                { parent: 'aliments', label: 'Máquina 2', icon: '✔' },
                { parent: 'aliments', label: 'Máquina 3', icon: '✔' },
                { parent: 'aliments', label: 'Máquina 4', icon: '✔' }
            ],
            rightIcon: '▶',
        },
        {
            parent: 'aliments',
            label: 'Home',
            icon: '◯',
            click: voltarHome,
            child: [
                { parent: 'aliments', label: 'Voltar', icon: '◀', click: backToParent },
                { parent: 'aliments', label: 'Máquina 1', icon: '✔' },
                { parent: 'aliments', label: 'Máquina 2', icon: '✔' },
                { parent: 'aliments', label: 'Máquina 3', icon: '✔' },
                { parent: 'aliments', label: 'Máquina 4', icon: '✔' }
            ],
            rightIcon: '▶',
        },
    ]

    function backToParent(event) {

        const { id } = event.currentTarget.dataset

        let moveIn = document.getElementById("menu");
        moveIn.className = 'menu menu-primary-enter menu-primary-enter-active'

        let moveOut = document.getElementById(id);
        moveOut.className = 'menu menu-secondary-exit menu-secondary-exit-active'

    }

    function goToChild(event) {

        const { id } = event.currentTarget.dataset

        let moveIn = document.getElementById(id);
        moveIn.className = 'menu menu-secondary-enter menu-secondary-enter-active'


        let moveOut = document.getElementById("menu");
        moveOut.className = 'menu menu-primary-exit menu-primary-exit-active'

    }

    function voltarHistorico(event) {
        window.location.href = "dashboardHistorico.html"
    }

    function dashBoa (event) {
        window.location.href = "dashboardComponentes.html"
    }

    function dashRuim (event) {
        window.location.href = "dashboardRuim.html"
    }

    function voltarHome(event) {
        window.location.href = "../index.html"
    }

    const createMenuItem = (item) => {
        let li = document.createElement("li");
        li.className = 'menu-item'
        console.log(item.icon);
        if (item.icon == "✖") {
            li.innerHTML = `    
            <div class="icon" style="background-color: red">${item.icon}</div>
            <span class="label">${item.label}</span>
            <div>${item.rightIcon || ''}</div>
        `
        } else if (item.icon == "◀" || item.icon == "◯") {
            li.innerHTML = `    
            <div class="icon" style="background-color: #79690d">${item.icon}</div>
            <span class="label">${item.label}</span>
            <div>${item.rightIcon || ''}</div>
        `
        }
        else {
            li.innerHTML = `    
            <div class="icon">${item.icon}</div>
            <span class="label">${item.label}</span>
            <div>${item.rightIcon || ''}</div>
        `
        }

        li.dataset.id = item.parent
        li.onclick = item.click

        return li
    }

    const createChildMenu = (items) => {
        const sidebar = document.getElementById("sidebar")
        const menu = document.createElement("ul");
        menu.className = 'menu menu-secondary-exit menu-secondary-exit-active'
        menu.id = items[0].parent
        items.map(el => {
            let li = createMenuItem(el)
            menu.appendChild(li)
        })
        sidebar.appendChild(menu)
    }

    const buildMenu = () => {

        const sidebar = document.getElementById("sidebar")
        const mainMenu = document.createElement("ul");
        mainMenu.className = 'menu'
        mainMenu.id = 'menu'
        menu.map(el => {
            let li = createMenuItem(el)
            mainMenu.appendChild(li)
            createChildMenu(el.child)
        })
        sidebar.appendChild(mainMenu)
    }

    buildMenu()
</script>